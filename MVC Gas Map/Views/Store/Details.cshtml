@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" type="text/javascript"></script>
<!------>
<link href="~/Content/Leaflet/Control.Coordinates-0.1.5.css" rel="stylesheet" />
<script src="~/Scripts/Leaflet/Control.Coordinates-0.1.5.min.js"></script>
<!------>
<link href="~/Content/Leaflet/Control.MarkerHighLight.css" rel="stylesheet" />
<script src="~/Scripts/Leaflet/Control.MarkerHighLight.js"></script>
<!------>
<script src="~/Scripts/Leaflet/Control.MakiMarkers.js"></script>

@*<script src="~/Scripts/Common/Function.js"></script>
    <script src="~/Scripts/Common/Variable.js"></script>*@

<!-- Load Esri Leaflet from CDN -->
<script src="https://unpkg.com/esri-leaflet@2.4.1/dist/esri-leaflet.js" integrity="sha512-xY2smLIHKirD03vHKDJ2u4pqeHA7OQZZ27EjtqmuhDguxiUvdsOuXMwkg16PQrm9cgTmXtoxA6kwr8KBy3cdcw==" crossorigin=""></script>

<!-- Load Esri Leaflet Geocoder from CDN -->
<link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.css" integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g==" crossorigin="">
<script src="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.js" integrity="sha512-HrFUyCEtIpxZloTgEKKMq4RFYhxjJkCiF5sDxuAokklOeZ68U2NPfh4MFtyIVWlsKtVbK5GD2/JzFyAfvT5ejA==" crossorigin=""></script>



<style>
    .collapsible {
        background-color: #f3e8e8;
        color: black;
        cursor: pointer;
        padding: 1.3rem;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 1.5rem;
    }

        .active, .collapsible:hover {
            background-color: #cbadad;
        }

        .collapsible:after {
            content: '\002B';
            color: black;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            font-size: 1.5rem;
        }

    .active:after {
        content: "\2212";
    }

    .content {
        padding: 0 1.5rem;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
        /*background-color: #f1f1f1;*/
    }
</style>
<div class="text-center" id="noStoreArea" style="margin:11rem 0;display:none;">
    <img src="~/Images/43-432523_image-black-tokyo-ghoul-clipart-black-and-white.png" width="12%" />
    <h1 class="text-gray-500 mt-5">Bạn chưa tạo thông tin cửa hàng nào .</h1>
    <h2 class="text-gray-500 ">Tạo tại <a href="/Store/Create" class="text-wrap text-uppercase">đây</a></h2>
</div>

<div id="storesArea" class="mb-4" style="margin-top:3rem;">
    <button class="collapsible">Khách hàng quanh đây</button>
    <div class="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
    <button class="collapsible mt-1">Đơn hàng hiện có</button>
    <div class="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
    <button class="collapsible mt-1">Thông tin sản phẩm</button>
    <div class="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
    <button class="collapsible mt-1">Quản lí kinh doanh cửa hàng</button>
    <div class="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
    <button class="collapsible mt-1">Thông tin cửa hàng</button>
    <div class="content" style="padding:0 4rem;">
        @{ Html.RenderAction("Edit", "Store"); }
    </div>

</div>

<script>
    var storeID = null;
    var storeList = null;
    var userIDBySes = null;
    var permissionIDBySes = sessionStorage.getItem("PermissionID");


    window.onload = function () {
        if (permissionIDBySes == 3)
            $('#noStoreArea').show();
        else {
            $('#storesArea').show();
            loadData();
        }
    }
</script>

<script>
    function loadData() {
        userIDBySes = sessionStorage.getItem("UserID");

        $.ajax({
            async: false,
            type: 'Get',
            contentType: 'application/json; charset=utf-8',
            url: '/Store/GetAllStoresOfUserID?userID=' + userIDBySes,
            dataType: 'Json',
            success: function (data) {
                var storeList = data.data;
                var firstStore = storeList[0];

                renderHtmlForStore(firstStore);

                sessionStorage.setItem("StoreList", JSON.stringify(storeList));
            },
            error: function (data) {
                message_Error("", STR_MESS_ERROR_LOAD_FAIL);
            },
        });
        storeList = JSON.parse(sessionStorage.StoreList);
    }

    function renderHtmlForStore(store) {
        var storeID = store.storeID;
        //$('#btn_CreateOrEditStore').click(editStore(storeID));

        console.log(store);
    }
</script>

<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    coll[0].classList.toggle("active");
    var content = coll[0].nextElementSibling;
    if (content.style.maxHeight) {
        content.style.maxHeight = null;
    } else {
        content.style.maxHeight = content.scrollHeight + "px";
    }

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        });
    }
</script>
